import{_ as Z,S as re,i as ue,s as de,k as m,a as P,q as ce,a7 as he,l as g,h as y,c as U,m as O,r as _e,n as a,F as d,b as x,a8 as z,J as fe,d as pe,f as ve,t as me,P as ne,a9 as ge,aa as be,ab as ke,$ as ye,a0 as le,T as Te,g as Ee,ac as qe,A as we}from"../../../../chunks/index-49fb8ea3.js";import{d as B}from"../../../../chunks/singletons-cf7710cb.js";import{c as Me,s as oe}from"../../../../chunks/index-a30c4d16.js";B.disable_scroll_handling;B.goto;const Pe=B.invalidate;B.prefetch;B.prefetch_routes;B.before_navigate;B.after_navigate;function G(c,{pending:e,error:t,result:n}={}){let h;async function k(v){const i=h={};v.preventDefault();const u=new FormData(c);e&&e({data:u,form:c});try{const _=await fetch(c.action,{method:c.method,headers:{accept:"application/json"},body:u});if(i!==h)return;if(_.ok){n&&n({data:u,form:c,response:_});const o=new URL(c.action);o.search=o.hash="",Pe(o.href)}else t?t({data:u,form:c,error:null,response:_}):console.error(await _.text())}catch(_){if(t&&_ instanceof Error)t({data:u,form:c,error:_,response:null});else throw _}}return c.addEventListener("submit",k),{destroy(){c.removeEventListener("submit",k)}}}function Ue(c,{from:e,to:t},n={}){const h=getComputedStyle(c),k=h.transform==="none"?"":h.transform,[v,i]=h.transformOrigin.split(" ").map(parseFloat),u=e.left+e.width*v/t.width-(t.left+v),_=e.top+e.height*i/t.height-(t.top+i),{delay:o=0,duration:q=E=>Math.sqrt(E)*120,easing:w=Me}=n;return{delay:o,duration:Z(q)?q(Math.sqrt(u*u+_*_)):q,easing:w,css:(E,f)=>{const b=f*u,I=f*_,s=E+f*e.width/t.width,l=E+f*e.height/t.height;return`transform: ${k} translate(${b}px, ${I}px) scale(${s}, ${l});`}}}function se(c,e,t){const n=c.slice();return n[3]=e[t],n[4]=e,n[5]=t,n}function ie(c,e){let t,n,h,k,v,i,u,_,o,q,w,E,f,b,I,s,l,r,L,F,C,N,A,H,K,D,V,j,Q,R,W,X=we,M,Y,ee;function te(...T){return e[1](e[3],e[4],e[5],...T)}function ae(){return e[2](e[3],e[4],e[5])}return{key:c,first:null,c(){t=m("div"),n=m("form"),h=m("input"),v=P(),i=m("input"),_=P(),o=m("button"),E=P(),f=m("form"),b=m("input"),s=P(),l=m("input"),L=P(),F=m("button"),C=P(),N=m("form"),A=m("input"),K=P(),D=m("button"),Q=P(),this.h()},l(T){t=g(T,"DIV",{class:!0});var p=O(t);n=g(p,"FORM",{action:!0,method:!0});var S=O(n);h=g(S,"INPUT",{type:!0,name:!0,class:!0}),v=U(S),i=g(S,"INPUT",{type:!0,name:!0,class:!0}),_=U(S),o=g(S,"BUTTON",{class:!0,"aria-label":!0}),O(o).forEach(y),S.forEach(y),E=U(p),f=g(p,"FORM",{class:!0,action:!0,method:!0});var $=O(f);b=g($,"INPUT",{type:!0,name:!0,class:!0}),s=U($),l=g($,"INPUT",{"aria-label":!0,type:!0,name:!0,class:!0}),L=U($),F=g($,"BUTTON",{class:!0,"aria-label":!0}),O(F).forEach(y),$.forEach(y),C=U(p),N=g(p,"FORM",{action:!0,method:!0});var J=O(N);A=g(J,"INPUT",{type:!0,name:!0,class:!0}),K=U(J),D=g(J,"BUTTON",{class:!0,"aria-label":!0}),O(D).forEach(y),J.forEach(y),Q=U(p),p.forEach(y),this.h()},h(){a(h,"type","hidden"),a(h,"name","uid"),h.value=k=e[3].uid,a(h,"class","svelte-q3kvo1"),a(i,"type","hidden"),a(i,"name","done"),i.value=u=e[3].done?"":"true",a(i,"class","svelte-q3kvo1"),a(o,"class","toggle svelte-q3kvo1"),a(o,"aria-label",q="Mark todo as "+(e[3].done?"not done":"done")),a(n,"action","/todos?_method=PATCH"),a(n,"method","post"),a(b,"type","hidden"),a(b,"name","uid"),b.value=I=e[3].uid,a(b,"class","svelte-q3kvo1"),a(l,"aria-label","Edit todo"),a(l,"type","text"),a(l,"name","text"),l.value=r=e[3].text,a(l,"class","svelte-q3kvo1"),a(F,"class","save svelte-q3kvo1"),a(F,"aria-label","Save todo"),a(f,"class","text svelte-q3kvo1"),a(f,"action","/todos?_method=PATCH"),a(f,"method","post"),a(A,"type","hidden"),a(A,"name","uid"),A.value=H=e[3].uid,a(A,"class","svelte-q3kvo1"),a(D,"class","delete svelte-q3kvo1"),a(D,"aria-label","Delete todo"),D.disabled=V=e[3].pending_delete,a(N,"action","/todos?_method=DELETE"),a(N,"method","post"),a(t,"class","todo svelte-q3kvo1"),ne(t,"done",e[3].done),this.first=t},m(T,p){x(T,t,p),d(t,n),d(n,h),d(n,v),d(n,i),d(n,_),d(n,o),d(t,E),d(t,f),d(f,b),d(f,s),d(f,l),d(f,L),d(f,F),d(t,C),d(t,N),d(N,A),d(N,K),d(N,D),d(t,Q),M=!0,Y||(ee=[z(w=G.call(null,n,{pending:te})),z(G.call(null,f)),z(j=G.call(null,N,{pending:ae}))],Y=!0)},p(T,p){e=T,(!M||p&1&&k!==(k=e[3].uid))&&(h.value=k),(!M||p&1&&u!==(u=e[3].done?"":"true"))&&(i.value=u),(!M||p&1&&q!==(q="Mark todo as "+(e[3].done?"not done":"done")))&&a(o,"aria-label",q),w&&Z(w.update)&&p&1&&w.update.call(null,{pending:te}),(!M||p&1&&I!==(I=e[3].uid))&&(b.value=I),(!M||p&1&&r!==(r=e[3].text)&&l.value!==r)&&(l.value=r),(!M||p&1&&H!==(H=e[3].uid))&&(A.value=H),(!M||p&1&&V!==(V=e[3].pending_delete))&&(D.disabled=V),j&&Z(j.update)&&p&1&&j.update.call(null,{pending:ae}),p&1&&ne(t,"done",e[3].done)},r(){W=t.getBoundingClientRect()},f(){ge(t),X(),be(t,W)},a(){X(),X=ke(t,W,Ue,{duration:200})},i(T){M||(T&&ye(()=>{R||(R=le(t,oe,{start:.7},!0)),R.run(1)}),M=!0)},o(T){T&&(R||(R=le(t,oe,{start:.7},!1)),R.run(0)),M=!1},d(T){T&&y(t),T&&R&&R.end(),Y=!1,Te(ee)}}}function Ne(c){let e,t,n,h,k,v,i,u,_,o=[],q=new Map,w,E,f,b=c[0].todos;const I=s=>s[3].uid;for(let s=0;s<b.length;s+=1){let l=se(c,b,s),r=I(l);q.set(r,o[s]=ie(r,l))}return{c(){e=m("meta"),t=P(),n=m("div"),h=m("h1"),k=ce("Todos"),v=P(),i=m("form"),u=m("input"),_=P();for(let s=0;s<o.length;s+=1)o[s].c();this.h()},l(s){const l=he('[data-svelte="svelte-aw2gey"]',document.head);e=g(l,"META",{name:!0,content:!0}),l.forEach(y),t=U(s),n=g(s,"DIV",{class:!0});var r=O(n);h=g(r,"H1",{});var L=O(h);k=_e(L,"Todos"),L.forEach(y),v=U(r),i=g(r,"FORM",{class:!0,action:!0,method:!0});var F=O(i);u=g(F,"INPUT",{name:!0,"aria-label":!0,placeholder:!0,class:!0}),F.forEach(y),_=U(r);for(let C=0;C<o.length;C+=1)o[C].l(r);r.forEach(y),this.h()},h(){document.title="Todos",a(e,"name","description"),a(e,"content","A todo list app"),a(u,"name","text"),a(u,"aria-label","Add todo"),a(u,"placeholder","+ tap to add a todo"),a(u,"class","svelte-q3kvo1"),a(i,"class","new svelte-q3kvo1"),a(i,"action","/todos"),a(i,"method","post"),a(n,"class","todos svelte-q3kvo1")},m(s,l){d(document.head,e),x(s,t,l),x(s,n,l),d(n,h),d(h,k),d(n,v),d(n,i),d(i,u),d(n,_);for(let r=0;r<o.length;r+=1)o[r].m(n,null);w=!0,E||(f=z(G.call(null,i,{result:Oe})),E=!0)},p(s,[l]){if(l&1){b=s[0].todos,Ee();for(let r=0;r<o.length;r+=1)o[r].r();o=fe(o,l,I,1,s,b,q,n,qe,ie,null,se);for(let r=0;r<o.length;r+=1)o[r].a();pe()}},i(s){if(!w){for(let l=0;l<b.length;l+=1)ve(o[l]);w=!0}},o(s){for(let l=0;l<o.length;l+=1)me(o[l]);w=!1},d(s){y(e),s&&y(t),s&&y(n);for(let l=0;l<o.length;l+=1)o[l].d();E=!1,f()}}}const Oe=async({form:c})=>{c.reset()};function Ie(c,e,t){let{data:n}=e;const h=(v,i,u,{data:_})=>{i[u].done=!!_.get("done")},k=(v,i,u)=>t(0,i[u].pending_delete=!0,n);return c.$$set=v=>{"data"in v&&t(0,n=v.data)},[n,h,k]}class Re extends re{constructor(e){super(),ue(this,e,Ie,Ne,de,{data:0})}}export{Re as default};
